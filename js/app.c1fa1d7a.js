(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],f=0,d=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/tezos-transactions-view/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},"1fb6":function(t,e,n){"use strict";n("8f4c")},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("TransactionsView")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-snackbar",{attrs:{value:t.snackbar.active,top:"",right:"",color:"orange accent-1",timeout:"3000","content-class":"deep-orange--text",width:"500"}},[t._v(" Something went wrong: "),s("strong",[t._v(t._s(t.snackbar.text))])]),s("v-row",{staticClass:"text-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-img",{staticClass:"my-3 row-pointer",attrs:{src:n("5eb8"),contain:"",height:"200"},on:{click:t.goToTzKT}})],1),s("v-col",{staticClass:"mb-4"},[s("h1",{staticClass:"display-2 font-weight-bold mb-3"},[t._v(" Welcome to "),s("br"),t._v(" Tezos Transactions Viewer ")])])],1),s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-col",{staticClass:"d-flex",attrs:{cols:"10"}},[s("v-icon",{staticClass:"row-pointer theme-button",on:{click:function(e){t.$vuetify.theme.dark=!t.$vuetify.theme.dark}}},[t._v(" mdi-theme-light-dark ")]),s("v-text-field",{attrs:{label:"User address",solo:"",clearable:""},on:{"click:clear":t.clear},model:{value:t.textField,callback:function(e){t.textField=e},expression:"textField"}}),s("v-btn",{staticClass:"ml-6",attrs:{height:"48",disabled:t.loading,large:"",elevation:"5",color:"info"},on:{click:t.checkAddress}},[t._v(" Check ")])],1)],1),s("v-row",{attrs:{align:"center",justify:"space-around"}},[t.loading&&!t.items.length?s("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e(),t.items.length?s("v-card",{staticClass:"mx-auto",staticStyle:{position:"relative"},attrs:{width:"970",scrollable:"",tile:"",transition:"slide-x-transition"}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.fab,expression:"fab"}],staticClass:"to-top-button",attrs:{fab:"",absolute:"",bottom:"",right:"",color:"primary"},on:{click:function(e){return t.$vuetify.goTo(0,{container:t.$refs.card})}}},[s("v-icon",[t._v("mdi-arrow-up")])],1),s("v-virtual-scroll",{ref:"card",staticClass:"overflow-x",class:t.checkTheme,attrs:{bench:t.benched,items:t.items,height:"500","item-height":"100%"},nativeOn:{scroll:function(e){return t.scrolling.apply(null,arguments)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[s("v-list-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"success--text"},expression:"{ class: `success--text` }"}],key:n.id,staticClass:"row-pointer",attrs:{"three-line":""},on:{click:function(e){return t.rowClick(n.hash)}}},[s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(t.senderOrInitiator(n))+" "),s("v-icon",{attrs:{color:"blue darken-2"}},[t._v(" mdi-arrow-right ")]),t._v(" "+t._s(n.target.alias||n.target.address)+" ")],1),s("v-list-item-subtitle",{staticClass:"d-flex justify-space-between"},[s("span",[t._v(t._s(t.gasComputed(n)))]),s("span",[t._v("Amount: "),s("strong",[t._v(t._s(n.amount))])])]),s("v-list-item-subtitle",[t._v(" Transfers: "+t._s(n.hasOwnProperty("transfers")?n.transfers.length:"0")+" ")])],1)],1)]}}],null,!1,1143281113)})],1):t._e()],1)],1)},o=[],c=n("5530"),l=n("2909"),u=(n("99af"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("b64b"),n("a434"),n("4de4"),n("bc3a")),f=n.n(u),d={getTransactions:function(t,e,n){return f.a.get("https://staging.api.tzkt.io/v1/operations/transactions",{params:{"anyof.initiator.sender.target":t,limit:e,"offset.pg":n}})},getTransactionById:function(t){return f.a.get("https://staging.api.tzkt.io/v1/operations/transactions",{params:{id:t}})},getTransfers:function(t,e,n){return f.a.get("https://staging.api.tzkt.io/v1/tokens/transfers?",{params:{"anyof.from.to":t,"transactionId.ge":e,"transactionId.le":n}})}},h=n("28e7"),g={name:"TransactionsView",data:function(){return{textField:"tz1Yz97pBfZmVvpPy9AAXHSocWM7Vb7XKRm3",items:[],itemsPerPage:10,page:0,benched:0,loading:!1,homelessTransfersCount:0,homelessTransfers:[],snackbar:{active:!1,text:""},lightTheme:!0,fab:!1}},methods:{clear:function(){this.$set(this,"textField",""),this.$set(this,"items",[]),this.$set(this,"itemsPerPage",10),this.$set(this,"page",0),this.$set(this,"benched",0)},getTransactions:function(t){var e=this;this.loading=!0;var n=Object(l["a"])(this.items);d.getTransactions(this.textField,this.itemsPerPage,this.page).then((function(s){"PUT"===t&&(n=s.data),"PATCH"===t&&(n=[].concat(Object(l["a"])(e.items),Object(l["a"])(s.data)));var a=e.getItemsInterval(n),r=a.startId,i=a.endId;d.getTransfers(e.textField,r,i).then((function(t){e.merging(t.data,n),e.loading=!1}))})).catch((function(t){e.alertMessage("GET_TRANSACTION_ERROR - contact administrator"),console.log(t),e.loading=!1}))},checkAddress:function(){3===Object(h["a"])(this.textField)?this.getTransactions("PUT"):this.alertMessage("unsupported address")},scrolling:function(t){var e=t.currentTarget||t.target;if(this.fab=e.scrollTop>300,e&&e.scrollHeight-e.scrollTop===e.clientHeight){var n=Math.floor(this.items.length/this.itemsPerPage);this.page=n,this.getTransactions("PATCH")}},rowClick:function(t){var e="https://tzkt.io/".concat(t);window.open(e,"_blank").focus()},goToTzKT:function(){window.open("https://tzkt.io/","_blank").focus()},senderOrInitiator:function(t){var e=t.sender,n=t.initiator,s=n?n.alias||n.address:e.alias||e.address;return s},merging:function(t,e){for(var n=this,s=new Map,a=this.getItemsInterval(e),r=a.startIndex,i=a.endIndex,o=r;o<=i;o++)e[o].transfers=[],s.set(e[o].id,o);t.forEach((function(t){var a=s.get(t.transactionId);void 0===a?(n.homelessTransfers.push(t),console.log("%c HOMELESS_TRANSACTION","color: red",t.transactionId)):e[a].transfers.push(t)})),this.items=e,this.checkHomelessTransfers()},getItemsInterval:function(t){var e,n,s,a=null;return e=this.page*this.itemsPerPage+this.homelessTransfersCount,n=t[e].id,s=e+this.itemsPerPage-1,a=t[s].id,{startIndex:e,startId:n,endIndex:s,endId:a}},checkHomelessTransfers:function(){var t=this;this.homelessTransfers.length&&this.homelessTransfers.forEach((function(e){e.transactionId<t.items[t.items.length-1].id&&t.emergencyPushTransaction(e)}))},emergencyPushTransaction:function(t){var e=this,n={},s=t.transactionId;d.getTransactionById(s).then((function(a){if(n=Object(c["a"])({},a.data[0]),n.transfers=[],n.transfers.push(t),Object.keys(n).length){for(var r=e.items.length-1;r>=0;r--)if(e.items[r].id>s&&e.items[r-1].id<s)return e.items.splice(r,0,n),void console.log("%c ITEMS_AFTER_SPLICE","color: green",e.items)}else e.alertMessage("EMERGENCY_PUSH_TRANSACTION - contact administrator")})),console.log("ITEMS_BEFORE_SPLICE",this.items),this.homelessTransfersCount++,this.homelessTransfers=this.homelessTransfers.filter((function(t){return t.transactionId!==s}))},alertMessage:function(t){this.snackbar={active:!0,text:t}},gasComputed:function(t){var e=t.gasUsed,n=t.gasLimit;return"Available gas: ".concat(e," / ").concat(n)}},computed:{ripple:function(){return{color:"primary--text"}},checkTheme:function(){return this.$vuetify.theme.dark?"dark":"light"}}},p=g,m=(n("1fb6"),n("2877")),v=n("6544"),b=n.n(v),T=n("8336"),w=n("b0af"),_=n("62ad"),k=n("a523"),y=n("132d"),x=n("adda"),I=n("da13"),C=n("5d23"),P=n("490a"),O=n("0fd9"),V=n("2db4"),S=n("8654"),j=n("0de5"),E=n("269a"),A=n.n(E),M=n("5607"),z=Object(m["a"])(p,i,o,!1,null,null,null),$=z.exports;b()(z,{VBtn:T["a"],VCard:w["a"],VCol:_["a"],VContainer:k["a"],VIcon:y["a"],VImg:x["a"],VListItem:I["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VProgressCircular:P["a"],VRow:O["a"],VSnackbar:V["a"],VTextField:S["a"],VVirtualScroll:j["a"]}),A()(z,{Ripple:M["a"]});var R={name:"App",components:{TransactionsView:$},data:function(){return{}}},F=R,H=(n("034f"),n("7496")),N=n("f6c4"),L=Object(m["a"])(F,a,r,!1,null,null,null),B=L.exports;b()(L,{VApp:H["a"],VMain:N["a"]});var U=n("f309");s["a"].use(U["a"]);var K=new U["a"]({theme:{dark:!1}});s["a"].config.productionTip=!1,new s["a"]({vuetify:K,render:function(t){return t(B)}}).$mount("#app")},"5eb8":function(t,e,n){t.exports=n.p+"img/tezos-xtz-logo.597982c1.svg"},6:function(t,e){},7:function(t,e){},"85ec":function(t,e,n){},"8f4c":function(t,e,n){}});
//# sourceMappingURL=app.c1fa1d7a.js.map